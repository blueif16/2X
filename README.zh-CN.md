# 2X

中文 | **[English](./README.md)**

把你每天的工作变成社交媒体帖子。X、LinkedIn、Reddit。

---

## 为什么叫 2X

最开始的想法是说每天有两次高质量输出自己观点的机会。不是像流水线一样 AI 随意书写的文字随意粘贴在什么地方，而是确确实实可以代表你的想法的文字，可以有机会被别人所认可。

这个名字也比较有意思。To X？二乘？蓝二乘？事半功倍？其实也是起完以后引发了我对其很多可能性的遐想。但是不管怎么说，他其实就是一个 OpenClaw skill，说到底没什么了不起的。但是我希望他，至少是解决了我作为初号用户的问题。

作为 AI/Vibe Coding 时代的年轻人，而且是自认为怀才不遇、只是还没有到成熟季节的年轻程序员来说，其实每一天都会有很多的想法，很多技术上的小创新，各种各样辛苦做出来的 project。真的要是让我大书特书我其实是一个都拿不出手的，但是如果说就这样一个个的 project 慢慢做出来那一刻生命已经停下来又真的是很值得惋惜的事情。尤其这样一个当信息增速已经慢慢突破所有人的想象的年代，我想，就是这些一个一个半成熟的点子才是我们要解决的问题。如果哪怕能够多给一个人看到，也是满足了它生命周期的一小部分了。

所以 2X 的诞生就不是要书写多么完美的想法，而是确确实实一天天真实思考的积累，并且希望他会有一天汇聚起来开花结果，让更多人看到。

整个流程也是非常简单：

安装 skill → 选择自己想要发布的平台（Reddit、X、LinkedIn、小红书）→ 在浏览器上认证每一个平台 → 选择监控的信息（程序员来说 GitHub 进度，个人来说浏览器记录、Claude 上的聊天，都是每天花费很多时间的活动）→ 选择每天想要发布的次数以及时间（当然推荐 2 次，毕竟叫这个名字，而且次数太多会不认真，次数少又没存在感。在所选时间 OpenClaw 会主动提醒你，并且采集你这段时间的信息）→ 配置完成。

之后会有一次 dry run 只是为了熟悉流程 → 会提示输入一些想说的话 → 可以一直跟模型交互直到完全满意 → OpenClaw 内部运行，生成每个所选平台对应的文字，同时有 URL 你可以监控每个的生成进度，生成完之后你依旧可以在网页上面修改 → 点击发布 → OpenClaw 会调用每个 skill 用你的浏览器在不同平台发布内容 → 告知完成。

同时每个用户会有独立的个人 portal 可以监控数据。在我们的平台上你也可以选择公开自己的笔记，这样别人可以在平台上直接看你的内容。

最后一句。我想我这个 README 的中心思想是：如果没有任何想法，那么或许什么都不需要说。但是如果你有任何独立思考的想法，说出来总是好的。而在这个过程中，我希望 2X 可以帮到你。

OK, 那么下面内容都是AI写的
---

## 这东西到底是什么

你每天都在做有意思的事——提交代码、读论文、解决问题、洗澡的时候冒出灵感。大部分都蒸发了。有一些值得存在于你脑子之外。

2X 是一个住在 [OpenClaw](https://openclaw.com) 里的写作搭档。一天两次（或者随时），它看看你最近在忙什么，跟你聊一聊，帮你把想法打磨成值得发出去的东西。然后它处理机械部分——按平台排版、点按钮、发帖。

就这样。它不是自动驾驶。不会替你发帖。不会替你互动。不会优化触达率(但是可以选择监控)。就是一段 5 分钟的对话帮你把想法说清楚，然后分发出去。

## 一次典型的使用流程

你说 `2x now`（或者到了午间它自动提醒你）。

```
Agent: 我看到这些：
       - GitHub: 3 个 commit 到 chrome-devtools-mcp（CDP 连接池）
       - 浏览记录: 大概 40 分钟在看浏览器指纹技术

       现在觉得哪个最有意思？

You:   连接池那个。之前一直撞连接数限制，结果修复方法简单得尴尬。

Agent: 怎么修的？

You:   就是复用同一个 CDP session 而不是每个 tab 开一个新的。
       从撞 10 连接的墙到跑 50 多个 tab 毫无问题。

Agent: 明白了。草稿来了：

       X:
       每个 tab 开一个新的 CDP session？Chrome 到 10 个就崩。
       复用一个 session → 50+ tab，零崩溃。

       LinkedIn:
       今天上午在调 Chrome DevTools Protocol 的连接限制问题。
       原来我给每个浏览器 tab 都开了个新的 CDP session——
       Chrome 上限就 10 个。

       修复方案是那种"我一开始为什么没这么做"的感觉：
       所有 tab 共享一个 session。从一直崩溃到 50 多个
       tab 平稳运行。

       如果你在做浏览器自动化，先查连接池，再查别的。

You:   X 那条再精炼一点。Reddit 今天跳过。

Agent: X:
       每个 tab 新开 CDP session？Chrome 10 个就杀你。
       复用一个 → 50+ tab，稳如老狗。

You:   发吧。

Agent: ✅ 已发到 X: https://x.com/you/status/123
       ✅ 已发到 LinkedIn: https://linkedin.com/feed/update/456
       ⏭ Reddit: 跳过
```

对话本身就是产品。那 3 分钟你想清楚你的工作里什么最重要——这才是价值。帖子只是分发。

---

## 架构

2X 有两半：**本地**（你的机器、你的数据）和**云端**（Supabase，只有你批准的内容）。中间有一个同步守护进程连接它们，但隐私边界是硬性的、刻意的。

```
┌──────────────────────────────────────────────────────────────────┐
│                        你的机器（本地）                            │
│                                                                  │
│  ┌─────────┐   ┌──────────┐   ┌────────────┐   ┌────────────┐  │
│  │  采集    │──▶│   对话   │──▶│   草稿     │──▶│   发布     │  │
│  │          │   │          │   │            │   │            │  │
│  │ GitHub   │   │ 你 + AI  │   │ 写入本地   │   │ 浏览器     │  │
│  │ Chrome   │   │ 来回聊   │   │ .md 文件   │   │ 自动化     │  │
│  │ 聊天     │   │          │   │            │   │            │  │
│  └─────────┘   └──────────┘   └─────┬──────┘   └────────────┘  │
│       │                              │                           │
│       │  永远不离开                    │  只有你说                  │
│       │  你的机器                      │  "可以了"之后              │
│       ▼                              ▼                           │
│  2x-sessions/                   同步守护进程                      │
│  └─ 1/                         (fs.watch + 轮询)                 │
│     ├─ sources/  ← 原始数据          │                            │
│     ├─ drafts/   ← 你的文字          │                            │
│     └─ index.md  ← 摘要             │                            │
└──────────────────────────────────────┼───────────────────────────┘
                                       │
                              ─────────┼─────────
                                 隐私边界
                              ─────────┼─────────
                                       │
┌──────────────────────────────────────┼───────────────────────────┐
│                     SUPABASE（云端）  │                            │
│                                       ▼                           │
│  ┌────────────┐   ┌────────────┐   ┌────────────┐               │
│  │  sessions  │   │   drafts   │   │   posts    │               │
│  │            │   │            │   │            │               │
│  │ 只有分组   │   │ 你批准的   │   │ 已发布的   │               │
│  │ 键        │   │ 文字       │   │ 内容 +     │               │
│  │            │   │            │   │ 互动数据   │               │
│  └────────────┘   └────────────┘   └────────────┘               │
│                                                                  │
│  RLS: 每一行都限定 auth.uid() = user_id                          │
│  认证: GitHub OAuth（你的 GitHub 身份）                            │
│  密钥: 只用 publishable key（公开安全，无服务器密钥）               │
└──────────────────────────────────────────────────────────────────┘
```

### Skill 树

```
2x/
├── SKILL.md              ← 编排器：运行整个流程
├── setup/SKILL.md        ← 引导向导（只跑一次）
├── collect/SKILL.md      ← 从你的源抓取活动
├── draft/SKILL.md        ← 每个平台生成一份草稿
├── post-x/SKILL.md       ← X/Twitter 浏览器自动化
├── post-linkedin/SKILL.md← LinkedIn 浏览器自动化
├── post-reddit/SKILL.md  ← Reddit 浏览器自动化
└── db/
    ├── 001_create_tables.sql  ← Supabase schema
    ├── client.js              ← 认证 + session 管理的 CLI
    ├── sync.js                ← 双向同步守护进程
    └── package.json
```

你调用 `2x`（或者 cron 触发）。编排器按顺序调用子 skill。你不需要直接调用子 skill。

### 同步模型

agent 把草稿文件写到你的本地文件系统。同步守护进程用 `fs.watch` 监听这些文件，文件变化时推送到 Supabase。如果你在网页 UI 上编辑了草稿，守护进程每 5 秒轮询 Supabase 把更改拉回本地文件。冲突解决策略是 last-write-wins。防止循环用的是 3 秒冷却——守护进程自己写入的文件 3 秒内忽略 watcher 事件。

agent 不直接跟 Supabase 交互处理草稿。它只编辑本地 `.md` 文件。守护进程是桥梁。

---

## 聊聊隐私

我知道。"它读你的浏览器历史"听起来很吓人。换我也关掉页面。所以让我非常具体地说清楚到底发生了什么、没发生什么。

### 采集器到底做了什么

**GitHub**: 用你的 PAT（只读，你自己生成的）调用 GitHub API。拉取你最近的事件——commit、PR、issue。原始 JSON 保存在本地。摘要是 "3 个 commit 到 repo-name 关于某个话题"。摘要进入对话。原始 JSON 永远留在你的机器上。

**Chrome 历史**: 把你的 Chrome History SQLite 文件复制到 `/tmp`，查询最近 12 小时的页面标题和 URL，**立即删除副本**。摘要是 "大约 40 分钟在研究浏览器指纹技术（6 个页面）"。没有单独的 URL。没有页面标题。只有话题聚类。而且——采集器被明确指示要主动忽略明显的私人浏览：银行、邮件、医疗、社交媒体信息流。它只保留跟你可能想发帖的工作话题相关的东西。

**聊天 session**: 你在对话里跟 agent 说的话。这个一直开着——就是……聊天嘛。

### 什么东西会到云端（Supabase）

三样东西，只有三样：

1. **Sessions** — 一行数据：一个编号加一个状态（`drafting`、`ready`、`posted`）。没有内容。
2. **Drafts** — 你写的（或者批准的）文字。这是你亲口说了"可以了"的文字。
3. **Posts** — 发布后的内容 + 发布 URL + 互动数据（点赞、回复等），用于之后的分析。

就这些。你的 GitHub 事件、你的浏览历史、你想清楚要说什么的那段对话、你那些没通过审核的半成品想法——全都不会离开你的机器。

### 同意的那一刻

在你跟 agent 聊完之前，没有任何东西会跨过隐私边界。流程是：

1. 采集器抓取原始数据 → **留在本地**
2. 你和 agent 聊什么有意思 → **留在本地**
3. agent 生成草稿 → 先写入本地文件
4. 你编辑、迭代、说"可以了" → **这时候**同步守护进程才推送到 Supabase
5. 你说"发吧" → 浏览器自动化发到平台

第 4 步是同意的那一刻。在那之前，Supabase 不知道你今天做了什么。在那之后，它只知道你批准的文字。

### 那为什么还要云端？

好问题。如果重要的东西都在本地，为什么还要 Supabase？

说白了——就是为了一个更好的编辑界面。在终端或者telegram里改 markdown 文件能用，但体验不好。草稿放在 Supabase 意味着我们可以做一个干净的网页编辑器，让你并排调整 X 和 LinkedIn 的草稿、看修改历史、发布前预览效果。同时你也可以在任何浏览器上查看已发布的内容和互动数据，不用 SSH 到自己的机器上。

就这样。云端是一个方便编辑和查看的便利层。核心的东西——采集、对话、决策——都在你的机器上。如果 Supabase 明天掉线了，你的每一份草稿、每一条帖子都还是本地文件。云端让体验更好。它不是数据的唯一来源。

### 数据库是你的

每张表都有 Row Level Security：`auth.uid() = user_id`。你的数据对其他用户完全不可见。认证是 GitHub OAuth——不需要新密码，不需要管理 Supabase 账号。代码里的 publishable key 是公开安全的（它绕不过 RLS——这就是 Supabase publishable key 的设计初衷）。

### 自带密钥（BYOK）

2X 跑在 OpenClaw 上。驱动对话、草稿生成、摘要的那些 LLM 调用——用的是你自己的 API key，配在你自己的 OpenClaw 实例里。中间没有一个 2X 服务器在读你的对话。agent 跑在本地。LLM 调用直接从你的机器发到你的供应商。

### 如果你根本不想用采集器呢？

那就不启用。设置时被问到数据源时，说 `skip` 就行。唯一的数据源就是聊天 session——意味着 agent 完全根据你告诉它的内容来工作。没有 GitHub 窥探，没有浏览器历史，什么都没有。就是你说"嘿，我今天做了个很酷的东西，帮我发一下"。

采集器是 opt-in 的。每一个都是。默认什么都不开。

---

## 安装

第一次说 `2x` 时，安装向导会引导你完成所有配置：

1. 选择平台（X、LinkedIn、Reddit——任意组合）
2. 在浏览器里登录每一个（agent 验证后继续）
3. 可选启用 GitHub 和/或 Chrome 历史采集
4. 设置发帖时间表（默认：本地时间中午 + 晚 8 点）
5. 粘贴 2-3 条你以前写过的、觉得像你的帖子（可选——帮助匹配你的语气）
6. 通过 GitHub OAuth 认证 Supabase
7. dry run 验证一切都能连通

大约 2 分钟。之后就是 `2x now` 或者等 cron 提醒。

---

## 2X 不是什么

**不是定时器。** 没有预写帖子排队等着发。每条帖子都来自实时对话。

**不是互动机器人。** 没有自动点赞、自动关注、自动回复别人的内容。2X 帮你创作，不帮你操控。

**不是分析工具。** 它存储互动数据供将来使用，但目前没有仪表盘、没有 A/B 测试、没有粉丝追踪。（Phase 4 会有。）

**不是自动驾驶。** 它字面意义上无法在你不在对话里并说出"发吧"之前发帖。如果你不回应 cron 提醒，什么都不会发生。如果你说"跳过"，它就跳过。如果今天没什么好说的，它会告诉你然后结束。

---

## 各模块如何协作（给好奇的人）

### 编排器（`SKILL.md`）

大脑。当你说 `2x now`：

1. 检查配置文件是否存在（没有就跑安装向导）
2. 检查认证状态
3. 如果同步守护进程没跑就启动它
4. 调用 `collect` → 拿到活动摘要
5. 展示摘要，跟你对话
6. 通过 `client.js create-session` 创建云端 session
7. 每个平台调用一次 `draft`，传入你的核心想法
8. 展示所有草稿，你迭代修改
9. 对已批准的平台调用 `post-x`、`post-linkedin`、`post-reddit`
10. 标记 session 为已发布

### 采集器（`collect/SKILL.md`）

用 bash 从每个源抓取原始数据（不用 LLM）。独立摘要每个源（一次一个，不混合）。在本地 session 文件夹写入 `index.md` 摘要和 `sources/` 原始数据。把摘要返回给编排器。绝不建议发什么——那是编排器在跟你聊完之后的事。

### 草稿（`draft/SKILL.md`）

接受一个平台 + 你的核心想法。如果有 voice sample 就加载。按平台规则生成一份草稿（X 280 字符、LinkedIn 专业叙述、Reddit 真诚有用的回复）。写入本地 `.md` 文件。同步守护进程处理剩下的。

### 发布 skill（`post-x/`、`post-linkedin/`、`post-reddit/`）

通过 OpenClaw 内置浏览器进行浏览器自动化。每个 skill 读取本地草稿文件，导航到平台，输入内容，点击发布，提取发布 URL，通过 `client.js publish-draft` 记录。如果出错就报告——绝不自动重试。

### 同步守护进程（`db/sync.js`）

后台进程。用 `fs.watch` 监听本地草稿文件，文件变化时推送到 Supabase。每 5 秒轮询 Supabase 获取在别处（比如未来的网页 UI）做的更改。冲突解决是 last-write-wins，比较 `mtime` 和 `updated_at`。防循环机制跟踪它最近写过的文件，3 秒内忽略 watcher 事件。

### 客户端 CLI（`db/client.js`）

五个命令：`auth login`、`auth status`、`create-session`、`publish-draft`、`update-session`。处理同步守护进程不管的结构性 Supabase 操作。所有输出都是 JSON 方便 agent 解析。

---

## 文件地图

| 文件 | 位置 | 它知道什么 |
|---|---|---|
| `2x-config.json` | 本地 | 你的平台、时间表、数据源偏好、subreddits |
| `2x-auth.json` | 本地 | Supabase access/refresh tokens |
| `2x.env` | 本地 | GitHub PAT |
| `2x-posted.jsonl` | 本地 | 每条帖子的日志（用于当天去重） |
| `2x-voice-samples/` | 本地 | 你的参考帖子用于语气匹配 |
| `2x-sessions/{n}/sources/` | 本地 | 采集器原始数据（GitHub JSON、Chrome 标题） |
| `2x-sessions/{n}/index.md` | 本地 | 每次 session 的活动摘要 |
| `2x-sessions/{n}/drafts/*.md` | 本地 → 云端 | 你批准的草稿（同步到 Supabase） |
| Supabase `sessions` | 云端 | Session 编号 + 状态。没有内容。 |
| Supabase `drafts` | 云端 | 你批准的草稿文字，按平台 |
| Supabase `posts` | 云端 | 已发布内容 + URL + 互动数据 |

"本地 → 云端"的箭头就是隐私边界。箭头上面的一切留在你的机器上。箭头及以下的是你明确批准的内容。

---

## 当前进度

**Phase 1** ✅ — Skill 结构 + 引导向导
**Phase 2** ✅ — 采集、草稿、发布、Supabase 同步
**Phase 3** 🔜 — 测试 + 集成（跑 SQL、接通认证、端到端流程）
**Phase 4** — 草稿编辑网页 UI、cron 触发、风格学习、互动追踪

---

## License

[OpenClaw](https://openclaw.com) 生态的一部分。
